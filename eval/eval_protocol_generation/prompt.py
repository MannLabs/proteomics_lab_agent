"""Prompts."""

# ruff: noqa: RUF001
EVALUATION_CRITERIA = """
## Evaluation Criteria
* Completeness: What is present in both protocols. What is present in the ground truth but missing from the AI-generated protocol. What is present in the AI-generated protocol but not in the ground truth
* Technical Accuracy: The AI-generated protocol demonstrates scientific understanding by properly distinguishing between different techniques and equipment and using appropriate scientific terminology.
* Logical Flow: The workflow maintains the chronological sequence of the procedure.
* Safety: The appropriate identification and emphasis of critical cautions, warnings, and safety measures.
* Formatting: The AI-generated protocol matches the formatting of the ground truth protocol.

## Rating Rubric
For each criterion, rate the AI-generated protocol on a scale of 1-5:

5: (Very good). The AI-generated protocol demonstrates exceptional quality in this aspect, with no significant flaws or omissions. Fully meets or exceeds the ground truth protocol.
4: (Good). The AI-generated protocol demonstrates strong quality in this aspect, with only minor shortcomings that don't significantly impact effectiveness. Closely aligns with the ground truth protocol.
3: (Ok). The AI-generated protocol contains most essential elements but has noticeable differences from the ground truth protocol that might slightly impact its effectiveness.
2: (Bad). The AI-generated protocol has significant deficiencies in multiple criteria from the ground truth, missing or wrongly displaying important information that would likely impact its effectiveness.
1: (Very bad). The AI-generated protocol fails to meet minimum standards in this aspect, with fundamental flaws or critical omissions that render the content potentially unusable or unsafe.
"""


def create_protocol_evaluation_prompt(gt_protocol: str, generated_protocol: str) -> str:
    """Generates a prompt for evaluation.

    Parameters
    ----------
    gt_protocol : List[str]
        The ground truth protocols (benchmark) represented as a list of strings
    generated_protocol : List[str]
        The AI-generated protocols to evaluate represented as a list of strings

    Returns
    -------
    prompt: str

    """
    return f"""
    # Instruction

    You are an expert evaluator. Your task is to evaluate the quality of a protocol generated by an AI model by comparing it to a ground truth protocol. You will conduct a systematic, section-by-section analysis to determine how well the AI-generated protocol aligns with the ground truth protocol. You should first read the protocols carefully and then evaluate the quality of the AI-generated protocol based on the evaluation criteria below.\n
    # Evaluation
    {EVALUATION_CRITERIA}

    ## Evaluation Steps

    * Step 1: Read the 'Ground truth protocol' thoroughly and write it down again word-by-word (Verbatim).

    * Step 2: Read the 'AI-generated protocol' thoroughly and write it down again word-by-word (Verbatim).

    * Step 3: Compare each section of the AI-generated protocol with its counterpart in the ground truth protocol:

    1. Title
    2. Abstract
    3. Materials
    5. Each step from Expected Results
    6. Figures
    7. References

    For each section, note how they fullfill the evaluation criteria (Completeness, Technical Accuracy, Logical Flow, Safety, Formatting) using the 1-5 scale based on the Rating Rubric. Treat the ground truth as the gold standard and more trustworthy protocol.

    * Step 4: Comparative Analysis Table
    Create a table summarizing your findings:

    | Section | Ground Truth Protocol | AI-Generated Protocol | Completeness Rating (1-5) | Completeness Explanation | Technical Accuracy Rating (1-5) | Technical Accuracy Explanation | Logical Flow Rating (1-5) | Logical Flow Explanation | Safety Rating (1-5) | Safety Explanation | Formatting Rating (1-5) | Formatting Explanation | Notes |
    |-|-|-|-|-|-|-|-|-|-|-|-|-|-|
    | Title | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |Misaligned/Not applicable] | [Explanation] |
    | Abstract | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | Materials - e.g. Equipment | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | Materials - e.g. Reagents | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | Procedure - Step 1 | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | Procedure - Step 2 | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | Procedure - Step 3 | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | Procedure - Step 4 | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | Procedure - Step 5 | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | [Continue for all steps] | | | | | | | | | | | | | |
    | Expected Results | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | Figures | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |
    | References | [Text from ground truth] | [Text from AI protocol] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [1-5] | [Explanation] | [Additional observations or comments] |

    * Step 5: Overall Summary:
    Overall compare all sections in total and individually for Completeness, Technical Accuracy, Logical Flow, Safety, Formatting

    * Step 6: Overall Rating
    Provide an overall rating (1-5) based on step 5 and the Rating Rubric.

    # Protocols for Evaluation

    ## Ground Truth Protocol:
    {gt_protocol}

    ## AI-Generated Protocol:
    {generated_protocol}

    # Evaluation table of step 4
    """
